# 操作系统
1. 基本特征
   * 并发（并行/并发）：线程是并发的，进程是并行的
    1. 并发是指宏观上在一段时间内能同时运行多个程序，而并行则指同一时刻能运行多个指令。
    2. 并行需要硬件支持，如多流水线、多核处理器或者分布式计算系统。
    3. 操作系统通过引入进程和线程，使得程序能够并发运行。
   * 共享：共享内存（互斥共享/同时共享）
    1. 共享是指系统中的资源可以被多个并发进程共同使用。
    2. 有两种共享方式：互斥共享和同时共享。
    3. 互斥共享的资源称为临界资源，例如打印机等，在同一时刻只允许一个进程访问，需要用同步机制来实现互斥访问。
   * 虚拟：时间轮转/虚拟内存
    1. 虚拟技术把一个物理实体转换为多个逻辑实体。 
    2. 主要有两种虚拟技术：时（时间）分复用技术和空（空间）分复用技术。
    3. 多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。
    4. 虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间的页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页置换到内存中。
   * 异步：进程不是一次性执行完毕，走走停停。
    1. 异步指进程不是一次性执行完毕，而是走走停停，以不可知的速度向前推进。
2. 基本功能
   * 进程管理（进程状态，进程间通信，进程同步，进程调度）
   * 内存管理（内存分配，地址映射，内存保存与共享，虚拟内存）
3. 死锁
   * 必要条件：(1)互斥（1). 不可抢占 （2）占有且等待 . (2). 环路且等待 
   * 恢复：（1）杀死进程（2）回滚（3）抢占
   * 锁：读写锁/自旋锁。读写锁：分为读锁和写锁，读锁的话都可以读，写只有没有读锁/写锁的情况下才能写。自旋锁：自旋锁表示会一直占用CPU时间，所以对于只有单核单CPU的机器，自旋锁会有问题。乐观锁/悲观锁：读多写少用乐观锁，读少写多用悲观锁。乐观锁等更新的时候通过版本号判断是否拒绝。
4. 内存管理
   * 虚拟内存
   * 分页系统地址映射
   * 页面置换算法1.（最佳）2.最近最少使用（*LRU,用哈希表和双向链表实现）3.最近未使用 *4. 先进先出 5. 第二次机会算法 6. 时钟
   * 分页和分段的区别：（1）分段需要程序员显式划分/分页透明（2）分页是一维地址空间，分段是二维的。（3）分页大小不可变，分段大小可变（4）分页主要用于实现虚拟内存，从而获得更大的地址空间/分段主要是使程序和数据可以被划分成逻辑上独立的地址空间并有助于共享和保护。

5. 进程和线程的区别：（1）资源分配（2）开销（3）通信（4）场景（协程：效率高）

6. 程序的内存管理：从低地址到高地址分别为：（1）代码段（2）静态区（已初始化/未初始化）（3）堆（4）栈

7. 用户态和内核态：用户态和内核态是操作系统的两种运行级别，两者最大的区别就是特权级不同。用户态用用最低的特权级，内核态拥有较高的特权级。运行在用户态的程序不能直接访问操作系统内核数据结构和程序。内核态和用户态之间的转换方式主要包括：系统调用，中断和异常。为什么要分用户态和内核态：安全。在一些CPU指令中，有的指令用错或导致整个系统崩溃，内核提供API，用内核去执行这些指令。

原理：
