# 计算机网络

1. 简单介绍一下HTTP的长连接和短连接。

* **短连接:**

  浏览器和服务器每进行一次HTTP操作，就建立一次连接，但任务结束就中断连接。

  **长连接:**

  当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的 TCP连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接要客户端和服务端都支持长连接。

  **TCP短连接:**

  client向server发起连接请求，server接到请求，然后双方建立连接。client向server发送消息，server回应client，然后一次读写就完成了，这时候双方任何一个都可以发起close操作，不过一般都是client先发起 close操作.短连接一般只会在 client/server间传递一次读写操作

   **TCP长连接:**

  client向server发起连接，server接受client连接，双方建立连接。Client与server完成一次读写之后，它们之间的连接并不会主动关闭，后续的读写操作会继续使用这个连接。

2. TCP的三次握手过程，为什么会采用三次握手，若采用二次握手可以吗？

* TCP的三次握手过程：主机A向B发送连接请求；主机B对收到的主机A的报文段进行确认；主机A再次对主机B的确认进行确认。
* 一端(client)A发出去的第一个连接请求报文并没有丢失，而是因为某些未知的原因在某个网络节点上发生滞留，导致延迟到连接释放以后的某个时间才到达另一端(server)B。本来这是一个早已失效的报文段，但是B收到此失效的报文之后，会误认为是A再次发出的一个新的连接请求，于是B端就向A又发出确认报文，表示同意建立连接。如果不采用“三次握手”，那么只要B端发出确认报文就会认为新的连接已经建立了，但是A端并没有发出建立连接的请求，因此不会去向B端发送数据，B端没有收到数据就会一直等待，这样B端就会白白浪费掉很多资源。如果采用“三次握手”的话就不会出现这种情况，B端收到一个过时失效的报文段之后，向A端发出确认，此时A并没有要求建立连接，所以就不会向B端发送确认，这个时候B端也能够知道连接没有建立。

3. 常见的http码：

* 1XX Informational（请求正在处理）
* 2XX Success（请求成功）
* 3XX Redirection（重定向） 需要进行附加操作以完成请求
* 4XX Client Error（客户端错误）

* 5XX Server Error（服务器错误）
* 200 OK 请求正常处理
* 204 请求处理成功 但是没有任何资源返回给客户端(一般用于只需客户端向服务端发送消息)
* 403 请求资源的访问被服务器拒绝，一般是未获得文件系统的访问权限，访问权限出现问题。

4. 简述计算机网络中的七层模型

* OSI分层   （7层）：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。
  TCP/IP分层（4层）：网络接口层、       网际层、运输层、              应用层。
  五层协议   （5层）：物理层、数据链路层、网络层、运输层、              应用层。

5. TCP和UDP相关的协议分别有哪些？

* UDP: DNS
* HTTP: FTP(21), HTTP, SMTP(send email), POP3(receive email).

6. TCP和UDP的区别

* TCP提供的是面向连接的、可靠的数据流传输；  UDP提供的是非面向连接的、不可靠的数据流传输。
* TCP提供可靠的服务，通过TCP连接传送的数据，无差错、不丢失，不重复，按序到达；UDP尽最大努力交付，即不保证可靠交付。
* TCP面向字节流；UDP面向报文。
* TCP连接只能是点到点的；UDP支持一对一、一对多、多对一和多对多的交互通信。
* TCP首部开销20字节；UDP的首部开销小，只有8个字节。
* TCP的逻辑通信信道是全双工的可靠信道； UDP的逻辑通信信道是不可靠信道。

7. Post和Get有什么区别？

* GET主要用于从服务器查询数据，POST用于向服务器提交数据
*  GET传输数据量有限制，不能大于2kb，POST传递的数据量较大，一般大量的数据提交都是通过POST方式
* GET安全性较低，容易在URL中暴漏数据，POST安全性较高
* GET通过URL传递数据，POST通过http请求体传递数据

8. 衡量接口性能指标通常有哪些？

* 通常有：吞吐量、QPS（每秒查询率）、并发用户数、响应时间（RT）

9. 在浏览器中输入www.baidu.com后执行的全部过程

* 客户端浏览器通过DNS解析到www.baidu.com的IP地址220.181.27.48，通过这个IP地址找到客户端到服务器的路径。客户端浏览器发起一个HTTP会话到220.161.27.48，然后通过TCP进行封装数据包，输入到网络层。
* 在客户端的传输层，把HTTP会话请求分成报文段，添加源和目的端口，如服务器使用80端口监听客户端的请求，客户端由系统随机选择一个端口如5000，与服务器进行交换，服务器把相应的请求返回给客户端的5000端口。然后使用IP层的IP地址查找目的端。
* 客户端的网络层不用关系应用层或者传输层的东西，主要做的是通过查找路由表确定如何到达服务器，期间可能经过多个路由器，这些都是由路由器来完成的工作，我不作过多的描述，无非就是通过查找路由表决定通过那个路径到达服务器。
* 客户端的链路层，包通过链路层发送到路由器，通过邻居协议查找给定IP地址的MAC地址，然后发送ARP请求查找目的地址，如果得到回应后就可以使用ARP的请求应答交换的IP数据包现在就可以传输了，然后发送IP数据包到达服务器的地址。

10. cookie 和session 有什么区别？

* cookie数据存放在客户的浏览器上，session数据放在服务器上。
* cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗考虑到安全应当使用session。
* session会在一定时间内保存在服务器上。当访问增多，会比较占用服务器的性能考虑到减轻服务器性能方面，应当使用COOKIE。
* 单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。
* 将登陆信息等重要信息存放为SESSION；其他信息如果需要保留，可以放在COOKIE中

11. 
    1. 链路层（帧）
    * 差错检测：循环冗余检验CRC
    * 信道分类：（1）广播（避免冲突会用到CSMA/CD, 信道复用）（2）点对点
    2. 网络层（分组）
    * NAT网络地址转换（例如登录实验室服务器的IP不同端口对应不同数据中心）
    * ICMP(网际控制报文协议)（ping/tracert/traceroute)
    * ARP(地址解析协议)（每个主机有本局域网内各主机和路由器IP地址到的MAC地址的缓存）
    3. 传输层
    * TCP和UDP
    * TCP的三次握手和四次挥手
    * TCP的可靠传输（超时重传）
    * TCP的滑动窗口（流量控制）
    * TCP拥塞控制（慢启动/阻塞避免/快重传/快恢复）
    4. 应用层
    * 域名（根域名，顶级域名，二级域名）
    * FTP（21号端口）DHCP(动态主机配置协议)
    * Web页面请求过程（1）DHCP配置主机（2）ARP解析MAC地址（只有网关的IP，要得到网关的MAC)（3）有了网关的MAC就能根据RIP,OSPF,BGP到达DNS。（4）HTTP请求。

## TCP报文

![pic](C:\Users\bravolu\Desktop\bravolu\tcp.jpg)

## UDP实现可靠传输

* udp如何实现可靠传输：传输层无法保证数据的可靠传输，只能通过应用层来实现。实现的方式参考tcp可靠性传输的方式（1）添加seq/ack （2）添加发送/缓冲区 （3）超时重传

## Https1.1/2.0新特性

## 超时重传

* 影响超时重传机制协议效率的一个关键参数：RTO（重传超时时间）
  * 太长：性能差
  * 太短：重发越多，网络拥塞，导致更多超时
  * 动态设置，引入RTT（发送端从发送TCP包开始到接收它的立即响应所耗费的传输时间。）

## TCP滑动窗口

* 作用

1. TCP的可靠性（建立在确认重传机制之上）
2. TCP流控特性（建立在确认重传机制之上）
3. 体现了TCP面向字节流的设计思路

## TCP/UDP，流式协议，面向报文的含义



## Ping 

* 原理
  * 利用网络上的机器IP地址的唯一性，给目标IP地址发送一个数据包，再要求对方返回一个同样大小的数据包来确定两台网络机器是否连接相通以及时延是多少。